---
layout: single
title: PART1.가상화 기술 - <가상화 기술과 컨테이너 가상화>

---





PART1. 가상화 기술

<가상화 기술과 컨테이너 가상화>

컨테이너 가상화 기술은 새로운 종류의 가상화 기술이며 현대 애플리케이션 운영 환경에서 하이퍼바이저 방식보다 더 선호되는 기술이다.
컨테이너가 더 선호되는 이유는 가볍고 빠르다는 장점 때문이다. 모던 애플리케이션 운영 환경에서 가볍고 빠르다는 것은 아주 중요한 요구 사항 중에 하나이다.

좀 더 구체적으로 컨테이너에 대해 알아보도록 하자.

컨테이너 가상화는 리눅스 커널이 제공하는 LXC라는 자체 격리 기술에서 출발했다.
하이퍼바이저 가상화의 경우 하이퍼바이저 소프트웨어가 격리된 공간을 만들어 주는 방식이였으나 LXC 기술을 사용하면 하이퍼바이저를 사용하지 않고
커널의 자체 기능만 사용해서 격리된 공간을 만들 수 있게된다.

LXC 기술은 커널의 네임스페이스와 Cgroups라는 기능을 활용한다.
네임프로세스는 프로세스와 하드드라이브,네트워크, 사용자, 호스트 네임처럼 리소스를 나누는 기준의 역할을 한다.
Cgroups는 프로세스가 사용하는 메모리와 CPU, 하드디스크, 네트워크 밴드위스처럼 리소스의 사용량을 배분하는 역할을 한다.
이렇게 LXC 기술을 사용해서 만들어진 격리된 각각의 공간들을 "컨테이너"라고 부른다.

네임스페이스나 Cgroups같은 기술의 디테일을 다루긴 힘들고 그냥 간단히 "컨테이너 가상화는 하이퍼바이저 없이 커널의 자체 기술을 활용한 가상화"라는 것만 
이해하는 것으로 충분하다. 
컨테이너 가상화는 커널의 격리 기능을 활용하기 때문에 모든 컨테이너는 호스트OS의 커널을 공유해서 사용하게 된다.
호스트OS 커널 공유는 컨테이너 가상화의 가장 중요한 특징 중 하나이다.

앞에서 말한 하이퍼바이저의 경우  게스트OS와 호스트OS의 커널이 독립적으로 존재하고 하이퍼바이저 소프트웨어가 중간에서 커널간 통신을 지원하는 방식이였다. 자연스럽게 시스템콜들이 하이퍼바이저의 통역을 거쳐야만 하는 중간과정이 존재하게 되고 이런 단계들로 인해 오버헤드가 커지는 결과를 초래한다.

반면 컨테이너는 호스트OS의 커널을 그대로 사용하기 때문에 중간 단계가 따로 없어 상대적으로 오버헤드가 적은 편이다. 이런 이유로 하드웨어 리소스 사용 요청이 더 효율적으로 이루어지게 된다.

 또한 호스트OS의 커널과 게스트OS의 커널이 각각 존재하게 되면 커널을 실행하는데 소요되는 시간이 드는데 반해 컨테이너들은 자체적인 커널이 없고 호스트OS를 공유하는 방식이기 때문에 빠른 부팅 또한 가능하다. 

이렇게 컨테이너 가상화 기술은 오버헤드가 적고 부팅이 빠른 장점을 가지며 모던 애플리케이션의 요구사항을 충족시킨다.
(다만 커널을 독립적으로 가지고 있는 가상머신이 보안적인 측면에서는 더 뛰어나다고 볼 수도 있으며 컨테이너는 호스트OS의 커널을 공유하기 때문에
호스트OS와 다른 종류의 OS는 실행할 수 없다는 것이 상대적인 단점이라고 볼 수 있다.)



*정리

가상화 기술은 큰 서버를 나눠서 사용할 수 있는 기술.

하이퍼바이저 방식은 각각의 게스트OS가 독립적인 커널을 가지기 때문에 실행하기 까지의 시간이 오래걸리고 게스트OS로 인한 오버헤드가 크다는 단점.

컨테이너 방식은 각각의 컨테이너가 개별의 게스트OS를 가지지 않고 호스트OS의 커널을 공유하기 때문에 중간 단계의 처리나 여러 커널 실행에서 생기는 

오버헤드에서 자유로워 가볍고 빠른 특징.















